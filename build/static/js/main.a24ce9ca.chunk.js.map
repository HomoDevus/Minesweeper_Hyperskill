{"version":3,"sources":["img/logo.svg","context.js","Minesweeper.js","CellsCreate.js","App.js","index.js"],"names":["Context","React","createContext","Timer","props","timeOutput","control","timerCount","getMinutes","getSeconds","map","component","slice","join","Reset","reset","useContext","className","onClick","emoji","FlagsCounter","flags","ControlPanel","src","logo","alt","resetEmoji","Cell","cell","openCell","flag","cellClass","onContextMenu","bombsAround","Field","cells","id","Minesweeper","e","preventDefault","bombPlacer","bombsPositions","position","min","max","i","Math","floor","random","includes","push","bombCreator","field","cellsCreate","bomb","open","cellsCreator","forEach","bombPos","firstRun","closedCells","frozeField","App","useState","setCells","Date","setControl","firstCellBomb","clickedCell","emptyCellOpen","CellPosition","flagAmount","flagCounter","changeCell","cellPos","cellsAround","bombs","CellPos","cellPosition","bombsAmount","style","addObj","applyBombsAround","setTimeout","checkBombsAround","showAllBombs","prev","flagCount","timerStart","status","timerId","setInterval","date","setSeconds","addSecond","prevState","clearInterval","Object","assign","Provider","value","changes","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a24ce9ca.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.4cd9fe7a.svg\";","import React from \"react\";\n\nconst Context = React.createContext()\n\nexport default Context","import React, {useContext} from 'react';\nimport logo from './img/logo.svg';\nimport './Minesweeper.css';\nimport Context from \"./context\";\n\nfunction Timer(props) {\n    // Transform Date to [min, sec] array\n    let timeOutput = ['0' + props.control.timerCount.getMinutes(),\n    '0' + props.control.timerCount.getSeconds()].map(component => component.slice(-2));\n\n    return (\n        <div>{timeOutput.join(':')}</div>\n    )\n}\n\nfunction Reset(props) {\n    const {reset} = useContext(Context)\n    return (\n        <button className={'reset-button'} onClick={reset}>{props.emoji}</button>\n    )\n}\n\nfunction FlagsCounter(props) {\n    return (\n        <div>{props.control.flags}</div>\n    )\n}\n\nfunction ControlPanel(props) {\n    return (\n        <div className={'cp-outer'}>\n            <div className={'cp-heading'}>\n                <h2>Minesweeper</h2>\n                <img src={logo} className=\"cp-logo\" alt=\"logo\" />\n            </div>\n            <div className={'cp-control'}>\n                <FlagsCounter control={props.control}/>\n                <Reset emoji={props.control.resetEmoji}/>\n                <Timer control={props.control} />\n            </div>\n        </div>\n    )\n}\n\nfunction  Cell(cell) {\n    const {openCell, flag} = useContext(Context)\n    return (\n        <div className={`cell ${cell.props.cellClass}`}\n             onClick={() => openCell(cell.props)}\n             onContextMenu={() => flag(cell.props)}>{cell.props.bombsAround}</div>\n    )\n}\n\nfunction Field(props) {\n    return (\n        <div className={\"field\"}>\n            {props.cells.map(cell => {\n                return <Cell key={cell.id} props={cell} />\n            })}\n        </div>\n    )\n}\n\nexport default function Minesweeper(props) {\n    return (\n        <div className=\"game\" onContextMenu={(e)=>  {e.preventDefault(); return false;}}>\n            <ControlPanel control={props.control} />\n            <Field cells={props.cells} />\n        </div>\n    );\n}","function getRandomNum(min, max) {\n    return Math.random() * (max - min) + min;\n}\n\nfunction bombCreator() {\n    let bombsPositions = []\n    let position\n    for (let i = 10; i > 0;) {\n        position = Math.floor(getRandomNum(0, 71));\n        if (!bombsPositions.includes(position)) {\n            bombsPositions.push(position);\n            i--;\n        }\n    }\n    return bombsPositions\n}\n\nfunction cellsCreator() {\n    let cellsCreate = [];\n    for (let id = 0; id < 72; id++) {\n        cellsCreate.push({id: id, bomb: false, bombsAround: '', flag: false, open: false, cellClass: ''});\n    }\n    return cellsCreate;\n}\n\nexport default function bombPlacer() {\n        let bombsPositions = bombCreator();\n        let field = cellsCreator();\n        bombsPositions.forEach(function(bombPos) {\n            field[bombPos].bomb = true;\n        })\n        return field\n    }","import React from 'react';\nimport './App.css';\nimport Minesweeper from \"./Minesweeper\";\nimport bombPlacer from './CellsCreate';\nimport Context from \"./context\";\n\nlet firstRun = true\nlet closedCells = 72\nlet frozeField = false\n\nfunction App() {\n    function reset() {\n        timerStart(false);\n        firstRun = true;\n        closedCells = 72;\n        frozeField = false;\n        setCells(bombPlacer());\n        setControl(({timerCount: new Date(0), flags: 10, resetEmoji: 'ðŸ™‚'}))\n    }\n    // ======== States =======\n    const [cells, setCells] = React.useState(bombPlacer());\n    const [control, setControl] = React.useState(\n        {timerCount: new Date(0), flags: 10, resetEmoji: 'ðŸ™‚'}\n        );\n    // =======================\n\n    // ============== Cell open functions ===================\n    function getRandomNum(min, max) {\n        return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    function firstCellBomb(clickedCell) {\n        let position = getRandomNum(0, 71)\n        setCells(cells.map(cell => {\n            if (cell.id === clickedCell.id) {\n                cell.bomb = false\n            }\n            if (cell.id === position) {\n                if (!cell.bomb) {\n                    cell.bomb = true\n                } else {\n                    firstCellBomb(clickedCell)\n                }\n            }\n            return cell\n        }))\n    }\n\n    function openCell(clickedCell) {\n        // Check if this first running\n        if (firstRun) {\n            if (clickedCell.bomb) {\n                firstCellBomb(clickedCell)\n            }\n            timerStart(true);\n        }\n\n        // change values and add classes\n        firstRun = false\n        const CellPosition = clickedCell.id\n        const Cell = cells[clickedCell.id]\n\n        if (Cell.open === false && !frozeField) {\n            if (Cell.bomb) {\n                setControl(prev => ({...prev, resetEmoji: 'ðŸ˜µ'}));\n                showAllBombs();\n            } else {\n                emptyCellOpen(CellPosition)\n            }\n        }\n    }\n\n    function emptyCellOpen(CellPosition) {\n        let flagAmount = flagCounter()\n        let changes = {open: true, flag: false, cellClass: 'empty'}\n        changeCell(CellPosition, changes);\n        cellsAround(CellPosition);\n        closedCells--\n        checkForWin(closedCells)\n        setControl(prev => ({...prev, flags: flagAmount}));\n    }\n\n    // Return array with id of cells around\n    function cellsAround(cellPos) {\n        let cellsAround = [];\n\n        if (cellPos % 8 !== 0) {cellsAround.push(cellPos - 1)}\n        if ((cellPos + 1) % 8 !== 0) {cellsAround.push(cellPos + 1)}\n        if ((cellPos + 8) < 72) {cellsAround.push(cellPos + 8)}\n        if ((cellPos - 8) > -1) { cellsAround.push(cellPos - 8) }\n        if ((cellPos + 9) < 72 && (cellPos + 9) % 8 !== 0) {cellsAround.push(cellPos + 9)}\n        if ((cellPos - 9) > -1 && (cellPos - 8) % 8 !== 0) {cellsAround.push(cellPos - 9)}\n        if ((cellPos + 7) < 72 && (cellPos + 8) % 8 !== 0) {cellsAround.push(cellPos + 7)}\n        if ((cellPos - 7) > -1 && (cellPos - 7) % 8 !== 0) {cellsAround.push(cellPos - 7)}\n\n        return checkBombsAround(cellPos, cellsAround);\n    }\n\n    // Get central cell and cells around in array from other function and return a number of bombs\n    function checkBombsAround(cellPos, cellsAround) {\n        let bombs = 0;\n\n        for (const CellPos of cellsAround) {\n            if (cells[CellPos].bomb) {\n                bombs++;\n            }\n        }\n        if (bombs !== 0) {\n            return applyBombsAround(cellPos, bombs);\n        } else {\n            for (const CellPos of cellsAround) {\n                setTimeout(function() {\n                    if (!cells[CellPos].open) {\n                        emptyCellOpen(CellPos)\n                    }\n                }, 0)\n            }\n        }\n    }\n    // Get cell and bombs amount from checkBombsAround func. Then adds class for each number its own color\n    function applyBombsAround(cellPosition, bombsAmount) {\n        let style\n        switch (bombsAmount) {\n            case 1:\n                style = 'one-bomb';\n                break;\n            case 2:\n                style = 'two-bombs';\n                break;\n            case 3:\n                style = 'three-bombs';\n                break;\n            case 4:\n                style = 'four-bombs';\n                break;\n            case 5:\n                style = 'five-bombs';\n                break;\n            case 6:\n                style = 'six-bombs';\n                break;\n            case 7:\n                style = 'seven-bombs';\n                break;\n            case 8:\n                style = 'eight-bombs';\n                break;\n        }\n\n        let addObj = {cellClass: `empty ${style}`, bombsAround: bombsAmount}\n        changeCell(cellPosition, addObj)\n    }\n    // =======================================================\n\n    // ================== Flag functions ======================\n\n    function flag(clickedCell) {\n        const Cell = cells[clickedCell.id]\n        let changes = {}\n\n        if (!Cell.open) {\n            if (!Cell.flag && control.flags > 0) {\n                changes = {flag: true, cellClass: 'flagged'}\n            } else {\n                changes = {flag: false, cellClass: ''}\n            }\n            changeCell(clickedCell.id, changes)\n        }\n        setControl(prev => ({...prev, flags: flagCounter()}))\n    }\n\n    function flagCounter() {\n        let flagCount = 10\n\n        for (let cell of cells) {\n            if (cell.flag) {\n                flagCount -= 1\n            }\n        }\n        return flagCount\n    }\n    // =========================================================\n\n    // ============== Timer functions ==============\n\n    function addSecond(date) {\n        date.setSeconds(date.getSeconds() + 1)\n        return date\n    }\n\n    function timerStart(status) {\n\n        if (status) {\n            let timerId = setInterval(function() {\n                let date = addSecond(control.timerCount)\n                setControl(prevState => ({...prevState, timerCount: date}))}, 1000)\n            setControl(prevState => ({...prevState, timerId: timerId}))\n        } else {\n            clearInterval(control.timerId);\n        }\n    }\n    // =============================================\n    // =============== Win/Lose functions ==========\n\n    // Checks if closed cells = amount of bombs. If it's true shows all bombs and changes emoji\n    function checkForWin(closedCellsAmount) {\n        if (closedCellsAmount === 10) {\n            showAllBombs();\n            setControl(prev => ({...prev, resetEmoji: 'ðŸ¥³'}));\n        }\n    }\n\n    function showAllBombs() {\n        cells.map(cell => {\n            if (cell.bomb === true) {\n                let changes = {open: true, flag: false, cellClass: 'bomb'};\n                changeCell(cell.id, changes);\n                timerStart(false);\n                setControl(prev => ({...prev, flags: flagCounter()}));\n                frozeField = true;\n            }\n        })\n    }\n    // =============================================\n    // ========== Often used functions =============\n\n    // get cell position in an array and array with properties to change and change them\n    function changeCell(cellPosition, addObj) {\n        setCells(prev => {\n            prev[cellPosition] = Object.assign(prev[cellPosition], addObj)\n            return prev\n        })\n    }\n    // =============================================\n  return (\n      <Context.Provider value={{openCell, flag, reset}}>\n        <div className=\"App\">\n            <Minesweeper cells={cells} control={control} />\n        </div>\n      </Context.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}